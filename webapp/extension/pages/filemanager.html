<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>文件管理 · ReadPaper Utils</title>
    <link rel="stylesheet" href="../vendors/chota.css">
    <link rel="stylesheet" href="css/main.css">
    <style>
        /* small badge to indicate .idx exists for a book */
        .idx-badge {
            display: inline-block;
            background: #2f6e2f;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 8px;
            margin-left: .4rem;
            vertical-align: top;
            line-height: 1;
        }

        /* ensure file name cell wraps nicely */
        .file-name-cell {
            word-break: break-all;
        }
    </style>
    <link rel="icon" href="../../assets/favicon.png">
    <!-- styles moved to css/main.scss (main.scss -> main.css) -->
</head>

<body>
    <div data-include="partials/header.html"></div>
    <main role="main" class="container" aria-labelledby="page-title">
        <div class="row">
            <h1 id="page-title" class="is-hidden">文件管理</h1>
            <div id="device-info" class="muted"></div>
        </div>

        <div class="row">
            <div class="col-5 upload-box" id="uploadBox">
                <div class="mb-05"><strong id="uploadTitle">书籍-文件上传</strong></div>
                <input id="fileInput" type="file" multiple class="hidden" />
                <div class="flex-row gap-small">
                    <button id="btnSelect" class="button is-small">选择</button>
                    <button id="btnUpload" class="button primary is-small" disabled>上传</button>
                    <button id="btnDeleteSelected" class="button is-small outline" disabled
                        style="margin-left:.5rem">删除</button>
                    <span id="uploadInfo" class="muted"></span>
                </div>
            </div>

            <div class="col-5 upload-box rec-box" id="recBox">
                <div class="mb-05"><strong>阅读记录</strong></div>
                <div class="flex-row gap-small">
                    <button id="btnSyncTime" class="button primary is-small">同步时间</button>
                    <button id="btnBatchRecords" class="button is-small outline" title="查看选中书籍的阅读记录">批量阅读记录</button>
                    <button id="btnAllRecords" class="button is-small outline" title="查看所有书籍的阅读记录">全部阅读记录</button>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12 bg-dark text-light" style="padding-left:20px;">> <span id="uploadStatus"></span></div>
        </div>
        <div class="row">
            <div class="col col-12">
                <div class="panel">
                    <div class="row mb-05">
                        <div class="col-12 flex-row gap-small " id="combnav">
                            <div class="tabs is-full col-12" id="catTabs">
                                <a data-cat="book" class="active">书籍</a>
                                <a data-cat="font">字体</a>
                                <a data-cat="image">锁屏</a>
                                <a data-cat="screenshot">截图</a>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-05">
                        <p id="hint" class="muted col-12 bg-dark text-white" style="padding-left:30px;">支持 unicode/GBK
                            编码的 txt 文件。</p>
                    </div>
                    <div class="row mt-1">
                        <div class="col-12">
                            <table class="striped file-table">
                                <thead>
                                    <tr>
                                        <th style="width:5%"><input id="selectAll" type="checkbox" title="全选" /></th>
                                        <th style="width:35%">名称</th>
                                        <th style="width:15%">大小</th>
                                        <th style="width:15%">当前</th>
                                        <th style="width:30%" class="nowrap">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="fileBody">
                                    <tr>
                                        <td colspan="5" class="text-center">加载中...</td>
                                    </tr>
                                </tbody>
                            </table>
                            <div id="pager" class="pagination hidden">
                                <button id="prevBtn" class="button is-small outline">上一页</button>
                                <span id="pageInfo" class="muted"></span>
                                <button id="nextBtn" class="button is-small outline">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="toast-container" id="toasts"></div>

    <div data-include="partials/footer.html"></div>
    <script src="include-partials.js"></script>
    <script src="../vendors/jszip.min.js"></script>
    <script src="filemanager.js"></script>
</body>

</html>